@model WORKFLOW_APP.Models.OFF_ABS_STEPS


@{
    ViewBag.Title = "Create";
   
}

<script src="~/App_Start/global.js"></script>
<script src="~/Scripts/APP_SCRIPTS/groups.js"></script>
<link href="~/Scripts/APP_CSS/Groups.css" rel="stylesheet" />
<link href="~/Scripts/APP_CSS/animate.css" rel="stylesheet" />
<script type="text/javascript">
    //BuildDropDwon1('FIRMS_CODE', 'FIRM_CODE', 'NAME', ApplicationName + '/GROUPS/firms_ddl', firm_cod);
    
    BuildDropDwon1('OFF_ROLE_ARCHIVE', 'JOB_TYPE_ID', 'JOB_NAME', ApplicationName + '/GROUPS/ARH_ROLE', firm_cod);
    //active_ddl();
    //bldstat('#ACTV_F');
    //UNIT_DEF_GROUP_ddl();
    //BuildDropDwon('PARANT_FIRMS_CODE', 'FIRM_CODE', 'NAME', ApplicationName + '/GROUPS/firms_ddl?firm_code=1402102001');
     // document.getElementById('OFF_ABS_GROUP_ID_DIV').disabled = 'true';
   

         @if (ViewBag.IsUpdate == true)
    { 
             
         <text>
    $('#ORDER_ID').val(@Model.ORDER_ID);
    $('#OFF_ABS_STEPS_ID').val(@Model.OFF_ABS_STEPS_ID);
    $('#OFF_ROLE_ARCHIVE').val("@Model.JOB_TYPE_ID");
    //$('#PARANT_FIRMS_CODE').val("@*@Model.PARANT_FIRMS_CODE*@");
    
    </text>
     }
        $(" input[type=button],input[type=submit]").button();
        $("#saveForm").submit(function (e) {
            e.preventDefault();
            if ($("input[type=submit]").attr('name') == "Create")

                data = {
                    OFF_ABS_GROUP_ID: group_id, OFF_ABS_STEPS_NAME: $('#OFF_ABS_STEPS_NAME').val(), ORDER_ID: $('#ORDER_ID').val(), OFF_ROLE_ARCHIVE: $('#OFF_ROLE_ARCHIVE').val(),

                    Command: "Create_Steps"
                };

            else data = {
                OFF_ABS_GROUP_ID: group_id, OFF_ABS_STEPS_NAME: $('#OFF_ABS_STEPS_NAME').val(), ORDER_ID: $('#ORDER_ID').val(), JOB_TYPE_ID: $('#OFF_ROLE_ARCHIVE').val(),
                OFF_ABS_STEPS_ID: $('#OFF_ABS_STEPS_ID').val(),
                Command: "Edit_Steps"
            }
            $.ajax({
                url: ControllerName + data.Command,
                type: 'POST',
                data: data,
                dataType: 'json',
                success: function (data) {
                    //  st_group_gridDiv_Refresh();
                    bnd_step_grd(group_id);
                    if (data.status) {
                        swal({
                            title: "تم الاضافة",
                            text: "تم  الاضافة بنجاح",
                            type: "success",
                            timer: 2200
                        });

                        //    $('#OFF_ABS_GROUP_NAME').val('');
                        //  AG_SECTORS_Refresh('AG_SECTORS');
                        //alert(data.message);
                        $("#dialog-edit").dialog('close');
                        // alert("saad");
                    }
                    else {
                        swal({
                            title: "خطأ",
                            text: "  " + data.message + "",
                            type: "error",
                            timer: 2200
                        });
                        $("#dialog-edit").dialog('close');
                    }
                },
                error: function () {
                    swal({
                        title: "خطأ",
                        text: "  " + data.message + "",
                        type: "error",
                        timer: 2200
                    });
                    // $('#msg').html('<div class="failed">Error! Please try again.</div>');
                    //alert(data.message);
                }
            });

        });




    </script>

<form id="saveForm"  method="post"  style="width:500px" >
   
<fieldset>
     <legend>خطوات المجموعات</legend>
    <div class="row">
                        <div class="col-lg-2">
        <div class="editor-label" >
            @Html.LabelFor(model => model.OFF_ABS_STEPS_NAME, "أسم الخطوة ")
        </div>
        </div>
                <div class="col-lg-4">
                            <div class="editor-label" >
               <div class="editor-field">
            @Html.EditorFor(model => model.OFF_ABS_STEPS_NAME)
            @Html.ValidationMessageFor(model => model.OFF_ABS_STEPS_NAME)
        </div>
        </div>
        </div>
                <div class="col-lg-2">
                    <div class="editor-label">
            @Html.LabelFor(model => model.OFF_ROLE_ARCHIVE, "الوظيفة ")
        </div>
        </div>
                <div class="col-lg-4">
                           
<div id="OFF_ROLE_ARCHIVE">
    
</div>
    
        </div>


    </div>
      
        <div class="row">

                <div class="col-lg-2">
        <div class="editor-label" >
            @Html.LabelFor(model => model.ORDER_ID, " الترتيب")
        </div>
        </div>
                <div class="col-lg-4">
        <div class="editor-field"  ">
              <input id="ORDER_ID" style="" disabled="disabled"/>
@*  @Html.EditorFor(model => model.ORDER_ID)
            @Html.ValidationMessageFor(model => model.ORDER_ID)*@
            
        </div>
        </div>
                    <div class="col-lg-2">
                
        <div class="editor-label" hidden="hidden">
           كود المرحلة 
        </div>
        </div>
                <div class="col-lg-4">
        <div class="editor-field" id="" >
            <input id="OFF_ABS_STEPS_ID" style="display:none" />
           @* @Html.EditorFor(model => model.OFF_ABS_GROUP_ID, new {@class="PARANT_FIRMS_CODE" })*@
         @*   @Html.ValidationMessageFor(model => model.OFF_ABS_GROUP_ID,"",new Dictionary<string,string> {{"style","width:450px; color:red;"}})*@
        </div>
        </div>
    </div>

   
        <p>
             @if (ViewBag.IsUpdate == true)
             { 

             <input type="submit" value="تعديل" name="Edit"  />
             }
             else
             {
            <input type="submit" value="إضافة" name="Create" />
             }
             &nbsp; &nbsp;
            <input type="button" id="btncancel"  onclick=" $('#dialog-edit').dialog('close');" value="إلغاء"/>
               
       
        </p>
            
    </fieldset>
 
</form>
       

