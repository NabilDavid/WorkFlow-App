@model WORKFLOW_APP.Models.OFF_ABS_GROUP

@{
    ViewBag.Title = "Create";
   
}

<script src="~/App_Start/global.js"></script>
<script src="~/Scripts/APP_SCRIPTS/groups.js"></script>
<link href="~/Scripts/APP_CSS/Groups.css" rel="stylesheet" />
<link href="~/Scripts/APP_CSS/animate.css" rel="stylesheet" />
<script type="text/javascript">

    //active_ddl();
    bldstat('#ACTV_F');
    UNIT_DEF_GROUP_ddl();
    //
    BuildDropDwon('PARANT_FIRMS_CODE', 'FIRM_CODE', 'NAME', ApplicationName + '/GROUPS/firms_ddl?firm_code="' + firm_cod);
     // document.getElementById('OFF_ABS_GROUP_ID_DIV').disabled = 'true';
   
     
         @if (ViewBag.IsUpdate == true)
    { 
         <text>
    $('#FIRMS_CODE').val("@Model.FIRMS_CODE");
    $('#OFF_ABS_GROUP_ID').val("@Model.OFF_ABS_GROUP_ID");
    $('#PARANT_FIRMS_CODE').val("@Model.PARANT_FIRMS_CODE");
   // $('#ABSCENCE_CATEGORY_ID').val("@*@Model.ABSCENCE_CATEGORY_ID*@");
    $('#UNIT_DEF_GROUP').val("@Model.UNIT_DEF_GROUP");
    $('#ACTV_F').val("@Model.ACTIV_F");
    

    </text>
     }
        $(" input[type=button],input[type=submit]").button();
        $("#saveForm").submit(function (e) {
            e.preventDefault();
            if ($("input[type=submit]").attr('name') == "Create")
                
                data = {
                    OFF_ABS_GROUP_ID: $('#OFF_ABS_GROUP_ID').val(), FIRMS_CODE: $('#FIRMS_CODE').val(), OFF_ABS_GROUP_NAME: $('#OFF_ABS_GROUP_NAME').val(),
                    ABSCENCE_CATEGORY_ID: $('#ABSCENCE_CATEGORY_ID').val(), ACTIV_F: $('#ACTV_F').val(), UNIT_DEF_GROUP: $('#UNIT_DEF_GROUP').val(),
                    UNIT_DEF_GROUP: $('#UNIT_DEF_GROUP').val(), PARANT_FIRMS_CODE: $('#PARANT_FIRMS_CODE').val(),
                    Command: "Create"
                };

            else data = {
                OFF_ABS_GROUP_ID: $('#OFF_ABS_GROUP_ID').val(), FIRMS_CODE: $('#FIRMS_CODE').val(), OFF_ABS_GROUP_NAME: $('#OFF_ABS_GROUP_NAME').val(),
                ABSCENCE_CATEGORY_ID: $('#ABSCENCE_CATEGORY_ID').val(), ACTIV_F: $('#ACTV_F').val(), UNIT_DEF_GROUP: $('#UNIT_DEF_GROUP').val(),
                UNIT_DEF_GROUP: $('#UNIT_DEF_GROUP').val(), PARANT_FIRMS_CODE: $('#PARANT_FIRMS_CODE').val(),
                Command: "Edit"
            }
            $.ajax({
                url: ControllerName + data.Command,
                type: 'POST',
                data: data,
                dataType: 'json',
                success: function (data) {
                    //  st_group_gridDiv_Refresh();
                    bind_group_grid($('#ABSCENCE_CATEGORY_ID').val());
                    if (data.status) {
                        swal({
                            title: "تم الاضافة",
                            text: " " + data.message + "",
                            type: "success",
                            timer: 2200
                        });

                        //    $('#OFF_ABS_GROUP_NAME').val('');
                        //  AG_SECTORS_Refresh('AG_SECTORS');
                        //alert(data.message);
                        $("#dialog-edit").dialog('close');
                        // alert("saad");
                    }
                    else {
                        swal({
                            title: "خطأ",
                            text: "  " + data.message + "",
                            type: "error",
                            timer: 2200
                        });
                        $("#dialog-edit").dialog('close');
                    }
                },
                error: function () {
                    swal({
                        title: "خطأ",
                        text: "  " + data.message + "",
                        type: "error",
                        timer: 2200
                    });
                    // $('#msg').html('<div class="failed">Error! Please try again.</div>');
                    //alert(data.message);
                }
            });

        });



        function active_ddl() {
            
            source = [
                { 1: "نشط" },
                { 0: "aaa" }


            ];
            var dataAdapter = new $.jqx.dataAdapter(source, { contentType: 'application/json; charset=utf-8' });
            $("#ACTV_F").jqxComboBox({
                source: source, animationType: 'slide', placeHolder: " اختر الفاعليه",
                dropDownHorizontalAlignment: 'right', rtl: true, displayMember: "TYP", valueMember: "CODE",
                autoComplete: true,
                searchMode: "containsignorecase",theme:"darkblue",
                dropDownWidth: 100, width: '70%', height: 30
            });
        }
        function UNIT_DEF_GROUP_ddl() {
            var txt = { "label": "غير اساسيه", "value": 0 };
            var val = { "label": " اساسيه", "value": 1 };
            var data = new Array(txt, val);
            var source =
            {
                localdata: data,
                datatype: "array"
            };
            var dataAdapter = new $.jqx.dataAdapter(source);
            $("#UNIT_DEF_GROUP").jqxDropDownList({
                source: dataAdapter,
                displayMember: "label",
                valueMember: "value",
                width: '100%',
                height: '30px',
                placeHolder: ":اختار    ",
                selectedIndex: -1,
                theme: theme,
                rtl: true
            });
        }
    </script>
<form id="saveForm"  method="post"  style="width:500px" >
   
<fieldset>
     <legend>المجموعــات</legend>
    <div style="width:99%">
    <div class="row">
                        <div class="col-lg-3">
        <div class="editor-label" >
            @Html.LabelFor(model => model.OFF_ABS_GROUP_NAME, "أسم المجموعه ")
        </div>
        </div>
                <div class="col-lg-4">
                            <div class="editor-label" >
               <div class="editor-field">
            @Html.EditorFor(model => model.OFF_ABS_GROUP_NAME)
            @Html.ValidationMessageFor(model => model.OFF_ABS_GROUP_NAME)
        </div>
        </div>
        </div>
                <div class="col-lg-2">
                    <div class="editor-label">
            @Html.LabelFor(model => model.ACTIV_F, "الفاعلية ")
        </div>
        </div>
                <div class="col-lg-3">
                           
<div id="ACTV_F">
    
</div>
    
        </div>


    </div>
      
        <div class="row" style="display:none">
                    <div class="col-lg-2">
                
        <div class="editor-label" >
             @Html.LabelFor(model => model.OFF_ABS_GROUP_ID, "كود المجموعه ")
        </div>
        </div>
                <div class="col-lg-4">
        <div class="editor-field" id="" >
            <input id="OFF_ABS_GROUP_ID" style="" disabled="disabled"/>
           @* @Html.EditorFor(model => model.OFF_ABS_GROUP_ID, new {@class="PARANT_FIRMS_CODE" })*@
         @*   @Html.ValidationMessageFor(model => model.OFF_ABS_GROUP_ID,"",new Dictionary<string,string> {{"style","width:450px; color:red;"}})*@
        </div>
        </div>
                <div class="col-lg-2">
        <div class="editor-label">
            @Html.LabelFor(model => model.PARANT_FIRMS_CODE, "المستوي الأعلي")
        </div>
        </div>
                <div class="col-lg-4">
        <div class="editor-field">
        @*    @Html.DropDownList("PARANT_FIRMS_CODE", String.Empty)*@
            @Html.ValidationMessageFor(model => model.PARANT_FIRMS_CODE)
            <div id="PARANT_FIRMS_CODE">

            </div>
            
        </div>
        </div>
    </div>
    <div class="space-2">

    </div>
          <div class="row">
        <div class="col-lg-3">
                    <div class="editor-label">
            @Html.LabelFor(model => model.UNIT_DEF_GROUP, "أساسية ")
        </div>
            </div>
                      <div class="col-lg-4">
                                  <div class="editor-field">
<div id="UNIT_DEF_GROUP">

     
</div>
        </div>
            </div>
                      <div class="col-lg-2" style="display:none">
                                  <div class="editor-label">
            @Html.LabelFor(model => model.UNIT_CODE_N, "كود الوحدة")
        </div>
            </div>
                      <div class="col-lg-3"style="display:none">
                          
        <div class="editor-field">
            @Html.EditorFor(model => model.UNIT_CODE_N)
            @Html.ValidationMessageFor(model => model.UNIT_CODE_N)
        </div>
            </div>
              </div> 
   
        <p>
             @if (ViewBag.IsUpdate == true)
             { 

             <input type="submit" value="تعديل" name="Edit"  />
             }
             else
             {
            <input type="submit" value="إضافة" name="Create" />
             }
             &nbsp; &nbsp;
            <input type="button" id="btncancel"  onclick=" $('#dialog-edit').dialog('close');" value="إلغاء"/>
               
       
        </p>
          </div>  
    </fieldset>

</form>

